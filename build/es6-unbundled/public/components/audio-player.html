<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/iron-icons/iron-icons.html"><link rel="import" href="../bower_components/iron-icons/av-icons.html"><link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="audio-svg-progress.html"></head><body><dom-module id="audio-player"><template><style>:host{width:100%;}nav{display:flex;flex-flow:column;box-sizing:border-box;padding:8px;}div{width:90%;flex-basis:40px;cursor:pointer;}paper-input.diferent{--paper-input-container-label:{color:var(--app-color);};--paper-input-container-input:{color:var(--app-color);};}paper-icon-button{color:#ffffff;display:block;transition:all 0.5 ease-in-out;}paper-icon-button[pause]{display:none;}paper-icon-button[active]{color:rgb(58, 210, 236);}paper-icon-button[loop]{color:#75e011;}paper-icon-button[looping]{color:rgb(58, 210, 236);}audio-svg-progress{position:relative;left:9px;}</style><nav><paper-item><paper-item-body two-line=""><paper-input class="diferent" title="Elapsed time" label="Elapsed" value="[[Elapsed]] [[duration]]"></paper-input></paper-item-body></paper-item><audio-svg-progress id="progress" percentage="{{currentTime}}"></audio-svg-progress><paper-item><paper-item-body two-line=""></paper-item-body><paper-icon-button on-click="play" active$="[[active]]" pause$="[[pause]]" icon="av:play-arrow" title="play"></paper-icon-button><paper-icon-button on-click="Pause" active$="[[active]]" pause$="[[!pause]]" icon="av:pause" title="pause"></paper-icon-button><paper-icon-button on-click="stopSong" icon="av:stop" title="stop"></paper-icon-button><paper-icon-button id="loop" on-click="Loop" loop$="[[loop]]" looping$="[[looping]]" icon="av:loop" title="loop"></paper-icon-button></paper-item></nav></template><script>var percentageOfVolumeSlider;class audioPlayer extends Polymer.Element{static get is(){return"audio-player"}constructor(){super()}ready(){super.ready();window.addEventListener("connected",event=>{if(this.elemTitle===event.detail.connected){this.connected=event.detail.state;console.log(this.connected);if(!0===this.record&&!1===this.connected){this.cancelRecording()}}},!1)}static get properties(){return{url:{type:Object,observer:"setElement"},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pause:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},loop:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},looping:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},elemTitle:{type:String},audio:{type:Object,notify:!0},Elapsed:{type:String},duration:{type:String,notify:!0},currentTime:{type:Number,observer:"jumpTo"}}}setElement(url){this.audio=new Audio(url);this.audio.controls=!1;this.audio.controlsList="nodownload";this.audio.crossOrigin="anonymous"}changeThis(){this.change=!this.change}click(){if(!1===this.active){this.play()}else{this.stopSong()}}play(){this.audio.play();this.pause=!0;this.active=!0;this.audio.ontimeupdate=event=>{this.updateTime(event);let figure=parseInt(100*(this.audio.currentTime/this.duration)),figure1=100*(this.audio.currentTime/this.duration);if(!0===this.audio.loop){this.loop=!1;this.looping=!0;this.$.progress.progressToX(figure,this.duration);this.$.loop.style.transform=`rotate(-${360*(figure1/100)}deg)`}else{this.$.progress.progressToX(figure1,this.duration)}};this.audio.onended=()=>{this.stopSong()}}Pause(){this.audio.pause();this.pause=!1;this.active=!1;if(!0===this.audio.loop){setTimeout(()=>{this.loop=!0;this.looping=!1;console.log("loop ",this.looping,this.loop)},100)}}stopSong(){this.audio.currentTime=0;this.Pause()}Loop(){if(!0===this.audio.loop){setTimeout(()=>{this.loop=!1;this.looping=!1;console.log("loop ",this.looping,this.loop)},100)}else{this.loop=!this.loop}this.audio.loop=!this.audio.loop}jumpTo(percentage){if(percentage){this.audio.currentTime=percentage/100*this.audio.duration}}updateTime(){var _Mathfloor=Math.floor;let currentSeconds=(10>_Mathfloor(this.audio.currentTime%60)?"0":"")+_Mathfloor(this.audio.currentTime%60),currentMinutes=_Mathfloor(this.audio.currentTime/60);this.Elapsed=currentMinutes+":"+currentSeconds;this.duration=_Mathfloor(this.audio.duration/60)+(10>_Mathfloor(this.audio.duration%60)?"0":"")+""+_Mathfloor(this.audio.duration%60)}}window.customElements.define(audioPlayer.is,audioPlayer);</script></dom-module></body></html>