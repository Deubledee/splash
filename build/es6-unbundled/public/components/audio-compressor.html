<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="./audio-compressor-function.html"><link rel="import" href="./audio-compressor-set-function.html"><link rel="import" href="./audio-compressor-set-value.html"></head><body><dom-module id="audio-compressor"><template><style include="shared-styles-typeG">:host{margin-right:4px;box-sizing:border-box;}article{min-height:135px;min-width:188px;width:auto;box-sizing:border-box;}div[slot="functionArea"][short]{flex-flow:column;}div[slot="functionArea"]{display:flex;flex-flow:row;}div[buttons]{display:flex;flex-flow:row;color:var(--app-color);}.showValues{display:none;position:relative;top:-2px;left:-0.5px;}.showValues[short]{display:block;}.showValueswraper{color:var(--app-secondary-close-button-color);position:relative;left:149px;top:-9px;height:11px;width:3px;}div[close-button]{position:relative;left:154px;top:-27px;}</style><article><label for="range">[[elemTitle]] <span>[[type]]</span></label><div buttons=""><div class="showValueswraper" on-click="showValues" show$="[[show]]"><paper-icon-button noink="" icon="unfold-less" title="togge function layout" class="showValues" short$="[[short]]"></paper-icon-button><paper-icon-button noink="" icon="unfold-more" title="togge function layout" class="showValues" short$="[[!short]]"></paper-icon-button></div><div close-button="" class="buttShow" show$="[[show]]"><button on-click="removeCall">x</button></div></div><div class="open divtitle-area" open$="[[open]]"><section id="title" class="open" open$="[[open]]"><paper-input id="titleInput" class="diferent" min="0" max="5" step="0.5" label="new title" title="new title" value="{{elemTitle}}"></paper-input><paper-button on-click="submit" raised="">aplly title</paper-button></section></div><section class="show" show$="[[show]]"><nav><paper-input id="reduction" class="diferent" label="reduction" title="the amount of gain reduction currently applied by the compressor to the signal" value="{{reduction}}"></paper-input></nav><audio-compressor-function id="functions" agent-class="[[agentClass]]" elem-title="[[elemTitle]]" type="[[type]]"><div slot="functionArea" short$="[[short]]"></div></audio-compressor-function></section></article></template><script>class audioCompressor extends Polymer.Element{static get is(){return"audio-compressor"}constructor(){super()}ready(){super.ready();window.addEventListener("compressor-changed",()=>{this.reduction=this.agentClass.contextNode[this.elemTitle].reduction;console.log("compressor-changed")})}static get properties(){return{elemTitle:{type:String,notify:!0},reduction:{type:Number,notify:!0},type:{type:String,value:"Compressor"},agentClass:{type:Object,notify:!0},value:{type:String,value:"agent",notify:!0},short:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},open:{type:Boolean,value:!0,notify:!0,reflectToAttribute:!0},show:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0}}}showValues(){this.short=!this.short}submit(){if(0<this.$.titleInput.value.length){this.elemTitle=this.elemTitle.split(" ").join("");this.agentClass.compressor((error,context)=>{if(context!==void 0){var that1=this;window.dispatchEvent(new CustomEvent("connect",{detail:{element:that1}}));this.open=!1;this.show=!0;this.reduction=context.reduction;window.dispatchEvent(new CustomEvent("elemem-title",{detail:{title:this.elemTitle}}))}else{this.$.titleInput.value=error;setTimeout(()=>{this.$.titleInput.value=""},1e3)}},this.elemTitle)}}removeCall(){if(this.agentClass.contextNode[this.elemTitle]){this.agentClass.removeAgents(()=>{this.agentClass.revoveElemTitle(()=>{setTimeout(()=>{window.dispatchEvent(new CustomEvent("remove-elem",{detail:{title:this.elemTitle}}));window.dispatchEvent(new CustomEvent("apllywith",{detail:{title:this.elemTitle}}))},500);this.parentElement.removeChild(this)},this.elemTitle)},"contextNode",this.elemTitle)}else{this.parentElement.removeChild(this);window.dispatchEvent(new CustomEvent("remove-elem",{detail:{title:this.elemTitle}}))}}}window.customElements.define(audioCompressor.is,audioCompressor);</script></dom-module></body></html>